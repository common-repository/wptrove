(()=>{"use strict";function t(t,e,a,o){var i,n=jQuery(".wptrove-admin-content-overlay");"wait"==e&&(i=n.find(".wptrove-admin-content-wait")),"error"==e&&(i=n.find(".wptrove-admin-content-error")),"show"==t&&(n.find(".wptrove-admin-content-wait").css({display:"none",opacity:0}),n.find(".wptrove-admin-content-error").css({display:"none",opacity:0}),n.css({opacity:0,display:"block"}).animate({opacity:1},1e3,(function(){"wait"==e&&(n.find(".wptrove-admin-content-wait__message").text(a),i.css({opacity:0,display:"block"}).animate({opacity:1},1e3,(function(){o()}))),"error"==e&&(n.find(".wptrove-admin-content-error__message").text(a),i.css({opacity:0,display:"block"}).animate({opacity:1},1e3,(function(){o()})))}))),"showPartial"==t&&("wait"==e&&(n.find(".wptrove-admin-content-wait__message").text(a),i.css({opacity:0,display:"block"}).animate({opacity:1},1e3,(function(){o()}))),"error"==e&&(n.find(".wptrove-admin-content-error__message").text(a),i.css({opacity:0,display:"block"}).animate({opacity:1},1e3,(function(){o()})))),"hide"==t&&i.animate({opacity:0},1e3,(function(){i.css({display:"none",opacity:0}),n.animate({opacity:0},1e3,(function(){n.css({display:"none",opacity:0})})),o()})),"hidePartial"==t&&i.animate({opacity:0},1e3,(function(){i.css({display:"none",opacity:0}),o()}))}function e(t,e,a){t.sendData.nonce=wptroveJsVariables.nonce,jQuery.ajax({type:"POST",url:t.url,data:t.sendData,beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",wptroveJsVariables.wpRestNonce)},timeout:t.timeout,success:function(t){e(t)},error:function(t,e,o){a(t,e,o)}})}var a;function o(a){var o=a.post_type;"wptrove-cf"===o&&(o="wptrove-custom-field");var i=a.offset,n="."+o+"-source",r="."+o+"s-pagination-source",s="."+o+"s-list",p="."+o+"s-empty",l="."+o+"s-pagination";if(!Object.prototype.hasOwnProperty.call(a,"count")&&Object.prototype.hasOwnProperty.call(a,"post_type")){var c=jQuery("."+o+"s-content").attr("data-count");a.count=c?parseInt(c,10):2}else a.count=2;if(!Object.prototype.hasOwnProperty.call(a,"status")&&Object.prototype.hasOwnProperty.call(a,"post_type")){var y=jQuery("."+o+"s-content").find(".wptrove-admin-select__heading").attr("data-status");console.log("getStatus",y),a.status=y||""}else a.status="";jQuery(s).removeAttr("style"),jQuery(p).removeAttr("style"),jQuery(l).removeAttr("style");var m={},w=a.count;m.url=wptroveJsVariables.api.admin.fetch,m.sendData=a,e(m,(function(e){var a="";if(Object.prototype.hasOwnProperty.call(e,"data")&&Object.prototype.hasOwnProperty.call(e.data,"data"))if(jQuery.isEmptyObject(e.data.data))jQuery(s).html(""),jQuery(l).html(""),t("hide","wait","",(function(){}));else{jQuery.each(e.data.data,(function(t,e){var i=jQuery(n).html();if("wptrove-testimonial"===o){if(Object.prototype.hasOwnProperty.call(e,"id")&&(i=i.replace("REPLACEWITHKEY",e.id)),Object.prototype.hasOwnProperty.call(e,"title")&&""!==e.title&&(i=i.replace("REPLACEWITHTITLE",e.title)),Object.prototype.hasOwnProperty.call(e,"meta")){var r="";Object.prototype.hasOwnProperty.call(e.meta,"wptrove-heading")&&(i=i.replace("REPLACEWITHHEADING",e.meta["wptrove-heading"])),Object.prototype.hasOwnProperty.call(e.meta,"wptrove-testimonial")&&(i=i.replace("REPLACEWITHTESTIMONIAL",e.meta["wptrove-testimonial"])),Object.prototype.hasOwnProperty.call(e.meta,"wptrove-name")&&""!==e.meta["wptrove-name"]&&(r+='<p class="wptrove-testimonial-item-meta__item">'+wptroveJsVariables.labels.testimonials.name+": <span>"+e.meta["wptrove-name"]+"</span></p>"),Object.prototype.hasOwnProperty.call(e.meta,"wptrove-company")&&""!==e.meta["wptrove-company"]&&(r+='<p class="wptrove-testimonial-item-meta__item">'+wptroveJsVariables.labels.testimonials.company+": <span>"+e.meta["wptrove-company"]+"</span></p>"),Object.prototype.hasOwnProperty.call(e.meta,"wptrove-designation")&&""!==e.meta["wptrove-designation"]&&(r+='<p class="wptrove-testimonial-item-meta__item">'+wptroveJsVariables.labels.testimonials.designation+": <span>"+e.meta["wptrove-designation"]+"</span></p>"),Object.prototype.hasOwnProperty.call(e.meta,"wptrove-email")&&""!==e.meta["wptrove-email"]&&(r+='<p class="wptrove-testimonial-item-meta__item">'+wptroveJsVariables.labels.testimonials.email+": <span>"+e.meta["wptrove-email"]+"</span></p>");var s='<div class="wptrove-testimonial-item-meta">'.concat(r,"</div>");i=i.replace("REPLACEWITHMETA",s);var p="";Object.prototype.hasOwnProperty.call(e.meta,"wptrove-status")&&"approved"===e.meta["wptrove-status"]&&(p="display:none;"),i=i.replace("REPLACEWITHAPPROVESTYLE",p)}i=i.replace("REPLACEWITHKEY",p)}a+=i}));var c="";if(Object.prototype.hasOwnProperty.call(e.data,"total")&&e.data.total>w){var y,m=jQuery(r).html();for(c+=m=(m=m.replace("REPLACEWITHOFFSET","prev")).replace("REPLACEWITHOFFSETTEXT",wptroveJsVariables.labels.prev),y=1;y<=Math.ceil(e.data.total/w);y++)c+=m=(m=(m=jQuery(r).html()).replace("REPLACEWITHOFFSET",y)).replace("REPLACEWITHOFFSETTEXT",y);c+=m=(m=(m=jQuery(r).html()).replace("REPLACEWITHOFFSET","next")).replace("REPLACEWITHOFFSETTEXT",wptroveJsVariables.labels.next)}c&&(jQuery(l).html(c).css({display:"block"}),jQuery(l).find(".wptrove-pagination-item").eq(i/w+1).addClass("wptrove-pagination-item--active"),i-w<0&&jQuery(l+" .wptrove-pagination-item").first().addClass("wptrove-pagination-item--disabled"),i>=e.data.total-w&&jQuery(l+" .wptrove-pagination-item").last().addClass("wptrove-pagination-item--disabled")),jQuery(s).html(a).css({display:"block"}),jQuery(p).css({display:"none"}),t("hide","wait","",(function(){}))}else t("showPartial","error",wptroveJsVariables.labels.error,(function(){}))}),(function(){t("hidePartial","wait","",(function(){t("showPartial","error",wptroveJsVariables.labels.error,(function(){}))}))}))}function i(t,e,a){"show"===t&&jQuery(e).find(".wptrove-button-overlay").css({opacity:0,display:"block"}).animate({opacity:1},1e3,(function(){jQuery(e).find(".wptrove-button-spinner").css({opacity:0,display:"block"}).animate({opacity:1},1e3,(function(){a()}))})),"hide"===t&&jQuery(e).find(".wptrove-button-spinner").animate({opacity:0},1e3,(function(){jQuery(this).css({display:"none"}),jQuery(e).find(".wptrove-button-overlay").animate({opacity:0},1e3,(function(){jQuery(this).css({display:"none"}),a()}))}))}jQuery((function(){jQuery(".wptrove-testimonials-selector .wptrove-admin-select-options__item").on("click",(function(){var e=jQuery(this).attr("data-key"),a=jQuery(this).text();jQuery(this).closest(".wptrove-admin-select").find(".wptrove-admin-select__heading").attr("data-status",e).text(a),jQuery(this).closest(".wptrove-admin-select-options").slideToggle(),t("show","wait",wptroveJsVariables.labels.wait,(function(){o({post_type:"wptrove-testimonial",offset:0})}))})),jQuery(".wptrove-testimonials-list").on("click",".wptrove-testimonial-item__title",(function(){jQuery(this).siblings(".wptrove-testimonial-item-content").slideToggle()})),jQuery(".wptrove-admin-content").on("click",".wptrove-testimonial-item-approve",(function(){var t=jQuery(this),a=jQuery(this).closest(".wptrove-testimonial-item").attr("data-key"),o=jQuery(this).closest(".wptrove-testimonial-item-actions").find(".wptrove-testimonial-item-error");o.text(""),i("show",t,(function(){e({sendData:{action:"approve",id:a},url:wptroveJsVariables.api.admin.moderate},(function(e){Object.prototype.hasOwnProperty.call(e,"result")&&e.result?t.animate({opacity:0},1e3,(function(){jQuery(this).animate({width:0},1e3,(function(){jQuery(this).remove()}))})):(o.text(wptroveJsVariables.labels.errory),i("hide",t,(function(){})))}),(function(){o.text(wptroveJsVariables.labels.errory),i("hide",t,(function(){}))}))}))})),jQuery(".wptrove-admin-content").on("click",".wptrove-testimonial-item-delete",(function(){var t=jQuery(this),a=jQuery(this).closest(".wptrove-testimonial-item"),o=a.attr("data-key"),n=jQuery(this).closest(".wptrove-testimonial-item-actions").find(".wptrove-testimonial-item-error");n.text(""),i("show",t,(function(){e({sendData:{action:"delete",id:o},url:wptroveJsVariables.api.admin.moderate},(function(e){Object.prototype.hasOwnProperty.call(e,"result")&&e.result?a.css({overflow:"hidden"}).animate({height:0},1e3,(function(){jQuery(this).remove()})):(n.text(wptroveJsVariables.labels.errory),i("hide",t,(function(){})))}),(function(){n.text(wptroveJsVariables.labels.errory),i("hide",t,(function(){}))}))}))}))})),(a=jQuery)((function(){o({post_type:"wptrove-testimonial",offset:0}),a("#wptrove-testimonials-settings").on("click",(function(){var e=a(this).attr("data-key"),i=".wptrove-"+e+"-container",n=a(this).text();a(".wptrove-admin-main-select__heading").text(n).attr("data-key",e),a(".wptrove-admin-main-select-options").slideToggle(),t("show","wait",wptroveJsVariables.labels.wait,(function(){a(".wptrove-admin-content-inner>div").css({display:"none"}),a(i).css({display:"block"}),o({post_type:"wptrove-testimonial",offset:0})}))})),a(".wptrove-admin-content-error__icon").on("click",(function(){t("hide","error","",(function(){}))})),a(".wptrove-admin-content-inner").on("click",".wptrove-pagination-item",(function(){if(!a(this).hasClass("wptrove-pagination-item--disabled")&&!a(this).hasClass("wptrove-pagination-item--active")){var e,i=a(this).attr("data-offset"),n=parseInt(a(this).closest(".wptrove-pagination").find(".wptrove-pagination-item--active").attr("data-offset"),10),r=parseInt(a(this).closest(".wptrove-container").attr("data-count"),10),s=a(this).closest(".wptrove-container").attr("data-type");"prev"==i?n-=1:"next"==i?n+=1:n=i,e=n-1<0?0:(n-1)*r,t("show","wait",wptroveJsVariables.labels.wait,(function(){o({post_type:s,offset:e})}))}})),a(".wptrove-admin-select__icon").on("click",(function(){a(this).siblings(".wptrove-admin-select-options").slideToggle()})),a(".wptrove-admin-content").on("click",".wptrove-button",(function(){a(this).find(".wptrove-button-overlay").css({opacity:0,display:"block"}).animate({opacity:1},1e3,(function(){}))}))}))})();